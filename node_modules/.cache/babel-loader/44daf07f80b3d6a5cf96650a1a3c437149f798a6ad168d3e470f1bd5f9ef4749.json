{"ast":null,"code":"import{useState}from\"react\";import axios from\"axios\";import ReCAPTCHA from\"react-google-recaptcha\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RegisterPage(){const[form,setForm]=useState({name:\"\",email:\"\",password:\"\",confirmPassword:\"\",role:\"user\"});const[error,setError]=useState(\"\");const[captchaValue,setCaptchaValue]=useState(null);const handleChange=e=>setForm({...form,[e.target.name]:e.target.value});const handleSubmit=async e=>{e.preventDefault();setError(\"\");if(form.password.length<8){return setError(\"הסיסמה חייבת להכיל לפחות 8 תווים\");}const passwordRegex=/^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d).{8,}$/;if(!passwordRegex.test(form.password)){return setError(\"הסיסמה חייבת לכלול אות גדולה, אות קטנה ומספר אחד\");}if(form.password!==form.confirmPassword){return setError(\"הסיסמאות אינן תואמות\");}if(!captchaValue){return setError(\"אנא אשר שאינך רובוט\");}try{const res=await axios.post(\"/api/register\",{...form,captchaValue});// שמירת משתמש + טוקן\nlocalStorage.setItem(\"user\",JSON.stringify(res.data.user));localStorage.setItem(\"token\",res.data.token);alert(\"נרשמת בהצלחה!\");}catch(err){var _err$response,_err$response$data;alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"שגיאה בהרשמה\");console.error(err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u05D4\\u05E8\\u05E9\\u05DE\\u05D4\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",placeholder:\"\\u05E9\\u05DD \\u05DE\\u05DC\\u05D0\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",placeholder:\"\\u05D0\\u05D9\\u05DE\\u05D9\\u05D9\\u05DC\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",placeholder:\"\\u05E1\\u05D9\\u05E1\\u05DE\\u05D4 (\\u05DC\\u05E4\\u05D7\\u05D5\\u05EA 8 \\u05EA\\u05D5\\u05D5\\u05D9\\u05DD)\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"confirmPassword\",type:\"password\",placeholder:\"\\u05D0\\u05D9\\u05DE\\u05D5\\u05EA \\u05E1\\u05D9\\u05E1\\u05DE\\u05D4\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(ReCAPTCHA,{sitekey:process.env.REACT_APP_RECAPTCHA_SITE_KEY,onChange:value=>setCaptchaValue(value)}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u05D4\\u05E8\\u05E9\\u05DE\\u05D4\"})]})]});}export default RegisterPage;","map":{"version":3,"names":["useState","axios","ReCAPTCHA","jsx","_jsx","jsxs","_jsxs","RegisterPage","form","setForm","name","email","password","confirmPassword","role","error","setError","captchaValue","setCaptchaValue","handleChange","e","target","value","handleSubmit","preventDefault","length","passwordRegex","test","res","post","localStorage","setItem","JSON","stringify","data","user","token","alert","err","_err$response","_err$response$data","response","message","console","className","children","onSubmit","placeholder","onChange","required","type","sitekey","process","env","REACT_APP_RECAPTCHA_SITE_KEY","style","color"],"sources":["C:/Users/alons/Desktop/BlueLine/frontend/src/pages/RegisterPage.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport ReCAPTCHA from \"react-google-recaptcha\";\r\n\r\nfunction RegisterPage() {\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\",\r\n    role: \"user\",\r\n  });\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const [captchaValue, setCaptchaValue] = useState(null);\r\n\r\n  const handleChange = (e) =>\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n\r\n    if (form.password.length < 8) {\r\n      return setError(\"הסיסמה חייבת להכיל לפחות 8 תווים\");\r\n    }\r\n\r\n    const passwordRegex = /^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d).{8,}$/;\r\n    if (!passwordRegex.test(form.password)) {\r\n      return setError(\"הסיסמה חייבת לכלול אות גדולה, אות קטנה ומספר אחד\");\r\n    }\r\n\r\n    if (form.password !== form.confirmPassword) {\r\n      return setError(\"הסיסמאות אינן תואמות\");\r\n    }\r\n\r\n    if (!captchaValue) {\r\n      return setError(\"אנא אשר שאינך רובוט\");\r\n    }\r\n\r\n    try {\r\n      const res = await axios.post(\"/api/register\", {\r\n        ...form,\r\n        captchaValue,\r\n      });\r\n\r\n      // שמירת משתמש + טוקן\r\n      localStorage.setItem(\"user\", JSON.stringify(res.data.user));\r\n      localStorage.setItem(\"token\", res.data.token);\r\n\r\n      alert(\"נרשמת בהצלחה!\");\r\n    } catch (err) {\r\n      alert(err.response?.data?.message || \"שגיאה בהרשמה\");\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>הרשמה</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          name=\"name\"\r\n          placeholder=\"שם מלא\"\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"אימייל\"\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"סיסמה (לפחות 8 תווים)\"\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          name=\"confirmPassword\"\r\n          type=\"password\"\r\n          placeholder=\"אימות סיסמה\"\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n\r\n        <ReCAPTCHA\r\n          sitekey={process.env.REACT_APP_RECAPTCHA_SITE_KEY}\r\n          onChange={(value) => setCaptchaValue(value)}\r\n        />\r\n\r\n        {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n\r\n        <button type=\"submit\">הרשמה</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RegisterPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}