{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import{jsxs as _jsxs,Fragment as _Fragment,jsx as _jsx}from\"react/jsx-runtime\";function HomePage(){const user=JSON.parse(localStorage.getItem(\"user\"));const[time,setTime]=useState(new Date());const[waveData,setWaveData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const latitude=32.08;// תל אביב\nconst longitude=34.78;useEffect(()=>{const interval=setInterval(()=>setTime(new Date()),60000);return()=>clearInterval(interval);},[]);useEffect(()=>{const fetchData=async()=>{setLoading(true);setError(null);const getFormattedDate=()=>{const today=new Date();const yyyy=today.getFullYear();const mm=String(today.getMonth()+1).padStart(2,\"0\");const dd=String(today.getDate()).padStart(2,\"0\");return`${yyyy}-${mm}-${dd}`;};const formattedDate=getFormattedDate();console.log(\"📅 תאריך שנשלח ל־API:\",formattedDate);try{const res=await axios.get(\"https://marine-api.open-meteo.com/v1/marine\",{params:{latitude,longitude,hourly:\"wave_height,wave_period,sea_surface_temperature\",start_date:formattedDate,end_date:formattedDate}});setWaveData(res.data.hourly);}catch(error){console.error(\"שגיאה בטעינת תחזית הים:\",error);setError(error.response?error.response.data:\"שגיאה לא ידועה\");}finally{setLoading(false);}};fetchData();},[]);const hour=time.getHours();const date=time.toLocaleDateString(\"he-IL\");const currentTime=time.toLocaleTimeString(\"he-IL\",{hour:\"2-digit\",minute:\"2-digit\"});let greeting=\"שלום\";let emoji=\"🌊\";let bgColor=\"#f2f4f8\";if(hour>=5&&hour<12){greeting=\"בוקר טוב\";emoji=\"☀\";bgColor=\"#e0f7fa\";}else if(hour>=12&&hour<18){greeting=\"צהריים טובים\";emoji=\"🌇\";bgColor=\"#fff3e0\";}else{greeting=\"ערב טוב\";emoji=\"🌙\";bgColor=\"#ede7f6\";}const getCurrentSeaCondition=()=>{if(!waveData)return null;const currentHourISO=time.toISOString().slice(0,13);// YYYY-MM-DDTHH\nconst index=waveData.time.findIndex(t=>t.startsWith(currentHourISO));if(index===-1)return null;return{height:waveData.wave_height[index],seaSurfaceTemp:waveData.sea_surface_temperature[index],wavePeriod:waveData.wave_period[index]};};const sea=getCurrentSeaCondition();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{backgroundColor:bgColor},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u05D1\\u05E8\\u05D5\\u05DA \\u05D4\\u05D1\\u05D0 \\u05DC\\u05BEBlueLine \",emoji]}),user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[greeting,\", \",user.name,\"! \\u05E9\\u05DE\\u05D7\\u05D9\\u05DD \\u05DC\\u05E8\\u05D0\\u05D5\\u05EA \\u05D0\\u05D5\\u05EA\\u05DA \\u05E9\\u05D5\\u05D1 \\uD83C\\uDFC4\\u200D\\u2642\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCC5 \\u05EA\\u05D0\\u05E8\\u05D9\\u05DA: \",date]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u23F0 \\u05E9\\u05E2\\u05D4 \\u05E0\\u05D5\\u05DB\\u05D7\\u05D9\\u05EA: \",currentTime]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u05D1\\u05E8\\u05D5\\u05DA \\u05D4\\u05D1\\u05D0 \\u05D0\\u05D5\\u05E8\\u05D7 \\u2013 \\u05E0\\u05D0 \\u05DC\\u05D4\\u05EA\\u05D7\\u05D1\\u05E8 \\u05D0\\u05D5 \\u05DC\\u05D4\\u05D9\\u05E8\\u05E9\\u05DD\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83C\\uDF0A \\u05EA\\u05E0\\u05D0\\u05D9 \\u05D4\\u05D9\\u05DD \\u05E9\\u05DC \\u05D4\\u05D9\\u05D5\\u05DD\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9 \\u05D9\\u05DD...\"}):error?/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u05E9\\u05D2\\u05D9\\u05D0\\u05D4 \\u05D1\\u05D8\\u05E2\\u05D9\\u05E0\\u05EA \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9\\u05DD: \",error.message||\"לא ניתן לטעון נתוני ים\"]}):sea?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u05D2\\u05D5\\u05D1\\u05D4 \\u05D4\\u05D2\\u05DC\\u05D9\\u05DD: \",sea.height,\" \\u05DE\\u05D8\\u05E8\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u05D8\\u05DE\\u05E4\\u05E8\\u05D8\\u05D5\\u05E8\\u05EA \\u05E4\\u05E0\\u05D9 \\u05D4\\u05D9\\u05DD: \",sea.seaSurfaceTemp,\"\\xB0C\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u05EA\\u05E7\\u05D5\\u05E4\\u05EA \\u05D4\\u05D2\\u05DC\\u05D9\\u05DD (\\u05DE\\u05E9\\u05DA \\u05D4\\u05D6\\u05DE\\u05DF \\u05D1\\u05D9\\u05DF \\u05D2\\u05DC \\u05DC\\u05D2\\u05DC): \",sea.wavePeriod,\" \\u05E9\\u05E0\\u05D9\\u05D5\\u05EA\"]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u05DC\\u05D0 \\u05E0\\u05D9\\u05EA\\u05DF \\u05DC\\u05D8\\u05E2\\u05D5\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9 \\u05D9\\u05DD \\u05E2\\u05D1\\u05D5\\u05E8 \\u05D4\\u05E9\\u05E2\\u05D4 \\u05D4\\u05E0\\u05D5\\u05DB\\u05D7\\u05D9\\u05EA\"}),/*#__PURE__*/_jsx(\"hr\",{})]});}export default HomePage;","map":{"version":3,"names":["useEffect","useState","axios","jsxs","_jsxs","Fragment","_Fragment","jsx","_jsx","HomePage","user","JSON","parse","localStorage","getItem","time","setTime","Date","waveData","setWaveData","loading","setLoading","error","setError","latitude","longitude","interval","setInterval","clearInterval","fetchData","getFormattedDate","today","yyyy","getFullYear","mm","String","getMonth","padStart","dd","getDate","formattedDate","console","log","res","get","params","hourly","start_date","end_date","data","response","hour","getHours","date","toLocaleDateString","currentTime","toLocaleTimeString","minute","greeting","emoji","bgColor","getCurrentSeaCondition","currentHourISO","toISOString","slice","index","findIndex","t","startsWith","height","wave_height","seaSurfaceTemp","sea_surface_temperature","wavePeriod","wave_period","sea","className","style","backgroundColor","children","name","message"],"sources":["C:/Users/alons/Desktop/BlueLine/frontend/src/pages/HomePage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction HomePage() {\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  const [time, setTime] = useState(new Date());\r\n  const [waveData, setWaveData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const latitude = 32.08; // תל אביב\r\n  const longitude = 34.78;\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => setTime(new Date()), 60000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const getFormattedDate = () => {\r\n        const today = new Date();\r\n        const yyyy = today.getFullYear();\r\n        const mm = String(today.getMonth() + 1).padStart(2, \"0\");\r\n        const dd = String(today.getDate()).padStart(2, \"0\");\r\n        return `${yyyy}-${mm}-${dd}`;\r\n      };\r\n\r\n      const formattedDate = getFormattedDate();\r\n      console.log(\"📅 תאריך שנשלח ל־API:\", formattedDate);\r\n\r\n      try {\r\n        const res = await axios.get(\r\n          \"https://marine-api.open-meteo.com/v1/marine\",\r\n          {\r\n            params: {\r\n              latitude,\r\n              longitude,\r\n              hourly: \"wave_height,wave_period,sea_surface_temperature\",\r\n              start_date: formattedDate,\r\n              end_date: formattedDate,\r\n            },\r\n          }\r\n        );\r\n\r\n        setWaveData(res.data.hourly);\r\n      } catch (error) {\r\n        console.error(\"שגיאה בטעינת תחזית הים:\", error);\r\n        setError(error.response ? error.response.data : \"שגיאה לא ידועה\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const hour = time.getHours();\r\n  const date = time.toLocaleDateString(\"he-IL\");\r\n  const currentTime = time.toLocaleTimeString(\"he-IL\", {\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  });\r\n\r\n  let greeting = \"שלום\";\r\n  let emoji = \"🌊\";\r\n  let bgColor = \"#f2f4f8\";\r\n\r\n  if (hour >= 5 && hour < 12) {\r\n    greeting = \"בוקר טוב\";\r\n    emoji = \"☀\";\r\n    bgColor = \"#e0f7fa\";\r\n  } else if (hour >= 12 && hour < 18) {\r\n    greeting = \"צהריים טובים\";\r\n    emoji = \"🌇\";\r\n    bgColor = \"#fff3e0\";\r\n  } else {\r\n    greeting = \"ערב טוב\";\r\n    emoji = \"🌙\";\r\n    bgColor = \"#ede7f6\";\r\n  }\r\n\r\n  const getCurrentSeaCondition = () => {\r\n    if (!waveData) return null;\r\n\r\n    const currentHourISO = time.toISOString().slice(0, 13); // YYYY-MM-DDTHH\r\n    const index = waveData.time.findIndex((t) => t.startsWith(currentHourISO));\r\n\r\n    if (index === -1) return null;\r\n\r\n    return {\r\n      height: waveData.wave_height[index],\r\n      seaSurfaceTemp: waveData.sea_surface_temperature[index],\r\n      wavePeriod: waveData.wave_period[index],\r\n    };\r\n  };\r\n\r\n  const sea = getCurrentSeaCondition();\r\n\r\n  return (\r\n    <div className=\"container\" style={{ backgroundColor: bgColor }}>\r\n      <h2>ברוך הבא ל־BlueLine {emoji}</h2>\r\n\r\n      {user ? (\r\n        <>\r\n          <p>\r\n            {greeting}, {user.name}! שמחים לראות אותך שוב 🏄‍♂\r\n          </p>\r\n          <p>📅 תאריך: {date}</p>\r\n          <p>⏰ שעה נוכחית: {currentTime}</p>\r\n        </>\r\n      ) : (\r\n        <p>ברוך הבא אורח – נא להתחבר או להירשם</p>\r\n      )}\r\n\r\n      <hr />\r\n\r\n      <h3>🌊 תנאי הים של היום</h3>\r\n      {loading ? (\r\n        <p>טוען נתוני ים...</p>\r\n      ) : error ? (\r\n        <p>שגיאה בטעינת נתונים: {error.message || \"לא ניתן לטעון נתוני ים\"}</p>\r\n      ) : sea ? (\r\n        <>\r\n          <p>גובה הגלים: {sea.height} מטר</p>\r\n          <p>טמפרטורת פני הים: {sea.seaSurfaceTemp}°C</p>\r\n          <p>תקופת הגלים (משך הזמן בין גל לגל): {sea.wavePeriod} שניות</p>\r\n        </>\r\n      ) : (\r\n        <p>לא ניתן לטעון נתוני ים עבור השעה הנוכחית</p>\r\n      )}\r\n      <hr />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,GAAA,IAAAC,IAAA,yBAE1B,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,KAAM,CAAAC,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CACrD,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGf,QAAQ,CAAC,GAAI,CAAAgB,IAAI,CAAC,CAAC,CAAC,CAC5C,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACmB,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACqB,KAAK,CAAEC,QAAQ,CAAC,CAAGtB,QAAQ,CAAC,IAAI,CAAC,CAExC,KAAM,CAAAuB,QAAQ,CAAG,KAAK,CAAE;AACxB,KAAM,CAAAC,SAAS,CAAG,KAAK,CAEvBzB,SAAS,CAAC,IAAM,CACd,KAAM,CAAA0B,QAAQ,CAAGC,WAAW,CAAC,IAAMX,OAAO,CAAC,GAAI,CAAAC,IAAI,CAAC,CAAC,CAAC,CAAE,KAAK,CAAC,CAC9D,MAAO,IAAMW,aAAa,CAACF,QAAQ,CAAC,CACtC,CAAC,CAAE,EAAE,CAAC,CAEN1B,SAAS,CAAC,IAAM,CACd,KAAM,CAAA6B,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5BR,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CAEd,KAAM,CAAAO,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAd,IAAI,CAAC,CAAC,CACxB,KAAM,CAAAe,IAAI,CAAGD,KAAK,CAACE,WAAW,CAAC,CAAC,CAChC,KAAM,CAAAC,EAAE,CAAGC,MAAM,CAACJ,KAAK,CAACK,QAAQ,CAAC,CAAC,CAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CACxD,KAAM,CAAAC,EAAE,CAAGH,MAAM,CAACJ,KAAK,CAACQ,OAAO,CAAC,CAAC,CAAC,CAACF,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CACnD,MAAO,GAAGL,IAAI,IAAIE,EAAE,IAAII,EAAE,EAAE,CAC9B,CAAC,CAED,KAAM,CAAAE,aAAa,CAAGV,gBAAgB,CAAC,CAAC,CACxCW,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEF,aAAa,CAAC,CAEnD,GAAI,CACF,KAAM,CAAAG,GAAG,CAAG,KAAM,CAAAzC,KAAK,CAAC0C,GAAG,CACzB,6CAA6C,CAC7C,CACEC,MAAM,CAAE,CACNrB,QAAQ,CACRC,SAAS,CACTqB,MAAM,CAAE,iDAAiD,CACzDC,UAAU,CAAEP,aAAa,CACzBQ,QAAQ,CAAER,aACZ,CACF,CACF,CAAC,CAEDrB,WAAW,CAACwB,GAAG,CAACM,IAAI,CAACH,MAAM,CAAC,CAC9B,CAAE,MAAOxB,KAAK,CAAE,CACdmB,OAAO,CAACnB,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CC,QAAQ,CAACD,KAAK,CAAC4B,QAAQ,CAAG5B,KAAK,CAAC4B,QAAQ,CAACD,IAAI,CAAG,gBAAgB,CAAC,CACnE,CAAC,OAAS,CACR5B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDQ,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAsB,IAAI,CAAGpC,IAAI,CAACqC,QAAQ,CAAC,CAAC,CAC5B,KAAM,CAAAC,IAAI,CAAGtC,IAAI,CAACuC,kBAAkB,CAAC,OAAO,CAAC,CAC7C,KAAM,CAAAC,WAAW,CAAGxC,IAAI,CAACyC,kBAAkB,CAAC,OAAO,CAAE,CACnDL,IAAI,CAAE,SAAS,CACfM,MAAM,CAAE,SACV,CAAC,CAAC,CAEF,GAAI,CAAAC,QAAQ,CAAG,MAAM,CACrB,GAAI,CAAAC,KAAK,CAAG,IAAI,CAChB,GAAI,CAAAC,OAAO,CAAG,SAAS,CAEvB,GAAIT,IAAI,EAAI,CAAC,EAAIA,IAAI,CAAG,EAAE,CAAE,CAC1BO,QAAQ,CAAG,UAAU,CACrBC,KAAK,CAAG,GAAG,CACXC,OAAO,CAAG,SAAS,CACrB,CAAC,IAAM,IAAIT,IAAI,EAAI,EAAE,EAAIA,IAAI,CAAG,EAAE,CAAE,CAClCO,QAAQ,CAAG,cAAc,CACzBC,KAAK,CAAG,IAAI,CACZC,OAAO,CAAG,SAAS,CACrB,CAAC,IAAM,CACLF,QAAQ,CAAG,SAAS,CACpBC,KAAK,CAAG,IAAI,CACZC,OAAO,CAAG,SAAS,CACrB,CAEA,KAAM,CAAAC,sBAAsB,CAAGA,CAAA,GAAM,CACnC,GAAI,CAAC3C,QAAQ,CAAE,MAAO,KAAI,CAE1B,KAAM,CAAA4C,cAAc,CAAG/C,IAAI,CAACgD,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAAE;AACxD,KAAM,CAAAC,KAAK,CAAG/C,QAAQ,CAACH,IAAI,CAACmD,SAAS,CAAEC,CAAC,EAAKA,CAAC,CAACC,UAAU,CAACN,cAAc,CAAC,CAAC,CAE1E,GAAIG,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,KAAI,CAE7B,MAAO,CACLI,MAAM,CAAEnD,QAAQ,CAACoD,WAAW,CAACL,KAAK,CAAC,CACnCM,cAAc,CAAErD,QAAQ,CAACsD,uBAAuB,CAACP,KAAK,CAAC,CACvDQ,UAAU,CAAEvD,QAAQ,CAACwD,WAAW,CAACT,KAAK,CACxC,CAAC,CACH,CAAC,CAED,KAAM,CAAAU,GAAG,CAAGd,sBAAsB,CAAC,CAAC,CAEpC,mBACEzD,KAAA,QAAKwE,SAAS,CAAC,WAAW,CAACC,KAAK,CAAE,CAAEC,eAAe,CAAElB,OAAQ,CAAE,CAAAmB,QAAA,eAC7D3E,KAAA,OAAA2E,QAAA,EAAI,mEAAoB,CAACpB,KAAK,EAAK,CAAC,CAEnCjD,IAAI,cACHN,KAAA,CAAAE,SAAA,EAAAyE,QAAA,eACE3E,KAAA,MAAA2E,QAAA,EACGrB,QAAQ,CAAC,IAAE,CAAChD,IAAI,CAACsE,IAAI,CAAC,sIACzB,EAAG,CAAC,cACJ5E,KAAA,MAAA2E,QAAA,EAAG,+CAAU,CAAC1B,IAAI,EAAI,CAAC,cACvBjD,KAAA,MAAA2E,QAAA,EAAG,kEAAc,CAACxB,WAAW,EAAI,CAAC,EAClC,CAAC,cAEH/C,IAAA,MAAAuE,QAAA,CAAG,iLAAmC,CAAG,CAC1C,cAEDvE,IAAA,QAAK,CAAC,cAENA,IAAA,OAAAuE,QAAA,CAAI,gGAAmB,CAAI,CAAC,CAC3B3D,OAAO,cACNZ,IAAA,MAAAuE,QAAA,CAAG,yEAAgB,CAAG,CAAC,CACrBzD,KAAK,cACPlB,KAAA,MAAA2E,QAAA,EAAG,4GAAqB,CAACzD,KAAK,CAAC2D,OAAO,EAAI,wBAAwB,EAAI,CAAC,CACrEN,GAAG,cACLvE,KAAA,CAAAE,SAAA,EAAAyE,QAAA,eACE3E,KAAA,MAAA2E,QAAA,EAAG,2DAAY,CAACJ,GAAG,CAACN,MAAM,CAAC,qBAAI,EAAG,CAAC,cACnCjE,KAAA,MAAA2E,QAAA,EAAG,0FAAkB,CAACJ,GAAG,CAACJ,cAAc,CAAC,OAAE,EAAG,CAAC,cAC/CnE,KAAA,MAAA2E,QAAA,EAAG,kKAAmC,CAACJ,GAAG,CAACF,UAAU,CAAC,iCAAM,EAAG,CAAC,EAChE,CAAC,cAEHjE,IAAA,MAAAuE,QAAA,CAAG,+MAAwC,CAAG,CAC/C,cACDvE,IAAA,QAAK,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}