{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminPanel=()=>{const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const fetchUsers=async()=>{try{setLoading(true);const token=localStorage.getItem(\"token\");const{data}=await axios.get(\"/api/users\",{headers:{Authorization:`Bearer ${token}`}});setUsers(data);}catch(err){console.error(\"Error fetching users:\",err);}finally{setLoading(false);}};const toggleBan=async id=>{try{const token=localStorage.getItem(\"token\");await axios.put(`/api/users/${id}/ban`,{},{headers:{Authorization:`Bearer ${token}`}});fetchUsers();}catch(err){console.error(\"Error toggling ban:\",err);}};const makeAdmin=async id=>{try{const token=localStorage.getItem(\"token\");await axios.put(`/api/users/${id}/make-admin`,{},{headers:{Authorization:`Bearer ${token}`}});fetchUsers();}catch(err){console.error(\"Error making admin:\",err);}};useEffect(()=>{fetchUsers();},[]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading users...\"});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Admin Panel\"}),/*#__PURE__*/_jsxs(\"table\",{border:\"1\",cellPadding:\"8\",style:{width:\"100%\",textAlign:\"left\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Banned\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[users.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",children:\"No users found.\"})}),users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.role}),/*#__PURE__*/_jsx(\"td\",{children:user.isBanned?\"Yes\":\"No\"}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleBan(user._id),children:user.isBanned?\"Unban\":\"Ban\"}),user.role!==\"admin\"&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>makeAdmin(user._id),children:\"Make Admin\"})]})]},user._id))]})]})]});};export default AdminPanel;","map":{"version":3,"names":["useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","AdminPanel","users","setUsers","loading","setLoading","fetchUsers","token","localStorage","getItem","data","get","headers","Authorization","err","console","error","toggleBan","id","put","makeAdmin","children","style","padding","border","cellPadding","width","textAlign","length","colSpan","map","user","name","email","role","isBanned","onClick","_id"],"sources":["C:/Users/alons/Desktop/BlueLine/frontend/src/components/AdminPanel.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst AdminPanel = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem(\"token\");\r\n\r\n      const { data } = await axios.get(\"/api/users\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      setUsers(data);\r\n    } catch (err) {\r\n      console.error(\"Error fetching users:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleBan = async (id) => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n\r\n      await axios.put(\r\n        `/api/users/${id}/ban`,\r\n        {},\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n\r\n      fetchUsers();\r\n    } catch (err) {\r\n      console.error(\"Error toggling ban:\", err);\r\n    }\r\n  };\r\n\r\n  const makeAdmin = async (id) => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n\r\n      await axios.put(\r\n        `/api/users/${id}/make-admin`,\r\n        {},\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n\r\n      fetchUsers();\r\n    } catch (err) {\r\n      console.error(\"Error making admin:\", err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  if (loading) return <p>Loading users...</p>;\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <h1>Admin Panel</h1>\r\n\r\n      <table\r\n        border=\"1\"\r\n        cellPadding=\"8\"\r\n        style={{ width: \"100%\", textAlign: \"left\" }}\r\n      >\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th>Email</th>\r\n            <th>Role</th>\r\n            <th>Banned</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          {users.length === 0 && (\r\n            <tr>\r\n              <td colSpan=\"5\">No users found.</td>\r\n            </tr>\r\n          )}\r\n\r\n          {users.map((user) => (\r\n            <tr key={user._id}>\r\n              <td>{user.name}</td>\r\n              <td>{user.email}</td>\r\n              <td>{user.role}</td>\r\n              <td>{user.isBanned ? \"Yes\" : \"No\"}</td>\r\n\r\n              <td>\r\n                <button onClick={() => toggleBan(user._id)}>\r\n                  {user.isBanned ? \"Unban\" : \"Ban\"}\r\n                </button>\r\n\r\n                {user.role !== \"admin\" && (\r\n                  <button onClick={() => makeAdmin(user._id)}>\r\n                    Make Admin\r\n                  </button>\r\n                )}\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}